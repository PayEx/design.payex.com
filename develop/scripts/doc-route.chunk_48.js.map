{"version":3,"sources":["webpack://payex/./src/App/Documentation/utils/ComponentPreview/index.js"],"names":["ComponentPreview","children","language","removeOuterTag","hideValue","removeList","showCasePanel","codeFigure","dangerousHTML","_removeOuterTag","element","div","document","createElement","innerHTML","renderToStaticMarkup","firstElementChild","firstChild","nodeValue","_removeList","listElements","querySelectorAll","htmlString","forEach","el","className","code","val","v","setDangerousHtml","map","child","jsbeautifier","html_beautify","replace","css","defaultProps","style","theme","undefined","tokens","getLineProps","getTokenProps","line","i","key","token","propTypes","PropTypes","oneOf","isRequired","bool"],"mappings":"ymBAQA,IAAMA,EAAmB,SAAC,GAA4G,IAA1GC,EAA0G,EAA1GA,SAAUC,EAAgG,EAAhGA,SAAUC,EAAsF,EAAtFA,eAAgBC,EAAsE,EAAtEA,UAAWC,EAA2D,EAA3DA,WAAYC,EAA+C,EAA/CA,cAAeC,EAAgC,EAAhCA,WAAYC,EAAoB,EAApBA,cACxGC,EAAkB,SAAAC,GACpB,IAAMC,EAAMC,SAASC,cAAc,OAInC,OAFAF,EAAIG,UAAYC,+BAAqBL,GAEjCC,EAAIK,kBACGL,EAAIK,kBAAkBF,UACtBH,EAAIM,WACJN,EAAIM,WAAWC,UAGnB,2CAGLC,EAAc,SAAAT,GAChB,IAAMC,EAAMC,SAASC,cAAc,OAEnCF,EAAIG,UAAYC,+BAAqBL,GAErC,IAAMU,EAAeT,EAAIU,iBAAiB,MACtCC,EAAa,GAMjB,OAJAF,EAAaG,SAAQ,SAAAC,GACjBF,GAAc,GAAJ,OAAOE,EAAGV,UAAV,UAGPQ,GAmHX,OACI,oCACKhB,EAAgB,mBARH,kBAClB,yBAAKmB,UAAU,kBACVxB,KAMgB,MAAoB,KACpCM,EAAa,mBA9FH,WACf,IAAImB,EAAO,GAEX,GAAiB,SAAbxB,GAAuBM,EACvBkB,EAhBiB,SAAAC,GACrB,IAAID,EAAO,GAQX,MAN2B,mBAAhBC,EAAIJ,QACXI,EAAIJ,SAAQ,SAAAK,GAAC,OAAIF,GAAQ,GAAJ,OAAOE,EAAP,SAErBF,EAAOC,EAGJD,EAOIG,CAAiB5B,QACrB,GAAiB,SAAbC,GAAuBD,GAAoC,mBAAjBA,EAAS6B,IAC1D7B,EAAS6B,KAAI,SAAAC,GAELL,GADAvB,EACQM,EAAgBsB,GACjB1B,EACCc,EAAYY,GAEZhB,+BAAqBgB,WAIlC,GAAiB,SAAb7B,EAEHwB,GADAvB,EACQM,EAAgBR,GACjBI,EACCc,EAAYlB,GAEZc,+BAAqBd,QAGjC,SAAeA,IACX,IAAK,SACDyB,EAAOzB,EAEP,MACJ,IAAK,SACDA,EAASsB,SAAQ,SAAAQ,GAAK,OAAIL,GAAQK,KAQ9C,OAAQ7B,GACJ,IAAK,OACDwB,EAAOM,IAAaC,cAAcP,GAClCA,EAAoBA,EA9DlBQ,QAAQ,OAAQ,IAChBA,QAAQ,WAAY,KACpBA,QAAQ,WAAY,KACpBA,QAAQ,UAAW,IA6DjB9B,IACAsB,EAAOA,EAAKQ,QAAQ,iBAAkB,KAG1C,MACJ,IAAK,MACDR,EAAOM,IAAaG,IAAIT,GAExB,MACJ,IAAK,aAGD,MACJ,QACI,MAAO,qBAKf,OAFAU,IAAaC,MAAQ,GAGjB,gCAEI,kBAAC,IAAD,KAAeD,IAAf,CAA6BE,WAAOC,EAAWb,KAAMA,EAAMxB,SAAUA,KAChE,gBAAGuB,EAAH,EAAGA,UAAWY,EAAd,EAAcA,MAAOG,EAArB,EAAqBA,OAAQC,EAA7B,EAA6BA,aAAcC,EAA3C,EAA2CA,cAA3C,OACG,yBAAKjB,UAAWA,EAAWY,MAAOA,GAC7BG,EAAOV,KAAI,SAACa,EAAMC,GAAP,OACR,2BAAKC,IAAKF,EAAOC,GAAOH,EAAa,CAAEE,OACnCE,IAAKD,KACJD,EAAKb,KAAI,SAACgB,EAAOD,GAAR,OACN,4BAAMA,IAAKA,GAASH,EAAc,CAAEI,QAChCD,wBAoBlB,MAAiB,OAK3C7C,EAAiB+C,UAAY,CACzB7C,SAAU8C,IAAUC,MAAM,CAAC,OAAQ,aAAc,QAAQC,WACzD/C,eAAgB6C,IAAUG,KAC1B/C,UAAW4C,IAAUG,KACrB9C,WAAY2C,IAAUG,KACtB7C,cAAe0C,IAAUG,KACzB5C,WAAYyC,IAAUG,KACtB3C,cAAewC,IAAUG,MAGdnD","file":"scripts/doc-route.chunk_48.js?e7b27e0f7f6be7b2e1fb","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { renderToStaticMarkup } from \"react-dom/server\";\nimport jsbeautifier from \"js-beautify\";\nimport Highlight, { defaultProps } from \"prism-react-renderer\";\n\n// NOTE: dangerousHTML prop is used when wanting to show html in the codefigure without encoding.\n\nconst ComponentPreview = ({ children, language, removeOuterTag, hideValue, removeList, showCasePanel, codeFigure, dangerousHTML }) => {\n    const _removeOuterTag = element => {\n        const div = document.createElement(\"div\");\n\n        div.innerHTML = renderToStaticMarkup(element);\n\n        if (div.firstElementChild) {\n            return div.firstElementChild.innerHTML;\n        } else if (div.firstChild) {\n            return div.firstChild.nodeValue;\n        }\n\n        return \"Check ComponentPreview _removeOuterTag!\";\n    };\n\n    const _removeList = element => {\n        const div = document.createElement(\"div\");\n\n        div.innerHTML = renderToStaticMarkup(element);\n\n        const listElements = div.querySelectorAll(\"li\");\n        let htmlString = \"\";\n\n        listElements.forEach(el => {\n            htmlString += `${el.innerHTML} \\n`;\n        });\n\n        return htmlString;\n    };\n\n    const _removeEmpty = val => {\n        val = val.replace(/=\"\"/g, \"\");\n        val = val.replace(/ class>/g, \">\");\n        val = val.replace(/ class /g, \" \");\n        val = val.replace(/value /g, \"\");\n\n        return val;\n    };\n\n    const setDangerousHtml = val => {\n        let code = \"\";\n\n        if (typeof val.forEach === \"function\") {\n            val.forEach(v => code += `${v}\\n`);\n        } else {\n            code = val;\n        }\n\n        return code;\n    };\n\n    const CodeFigure = () => {\n        let code = \"\";\n\n        if (language === \"html\" && dangerousHTML) {\n            code = setDangerousHtml(children);\n        } else if (language === \"html\" && children && typeof children.map === \"function\") {\n            children.map(child => {\n                if (removeOuterTag) {\n                    code += _removeOuterTag(child);\n                } else if (removeList) {\n                    code += _removeList(child);\n                } else {\n                    code += renderToStaticMarkup(child);\n                }\n            });\n\n        } else if (language === \"html\") {\n            if (removeOuterTag) {\n                code += _removeOuterTag(children);\n            } else if (removeList) {\n                code += _removeList(children);\n            } else {\n                code += renderToStaticMarkup(children);\n            }\n        } else {\n            switch (typeof children) {\n                case \"string\":\n                    code = children;\n\n                    break;\n                case \"object\":\n                    children.forEach(child => code += child);\n\n                    break;\n                default:\n                    console.warn(\"CodeFigure: children needs attention!\");\n            }\n        }\n\n        switch (language) {\n            case \"html\":\n                code = jsbeautifier.html_beautify(code);\n                code = _removeEmpty(code);\n\n                if (hideValue) {\n                    code = code.replace(/ value=\"(.*)\"/g, \"\");\n                }\n\n                break;\n            case \"css\":\n                code = jsbeautifier.css(code);\n\n                break;\n            case \"javascript\":\n                // This is not needed, and for some reason crashes after a prod build [EH]\n                // code = jsbeautifier(code);\n                break;\n            default:\n                return \"update switchcase!\";\n        }\n\n        defaultProps.style = \"\";\n\n        return (\n            <figure>\n                {/* keep theme as undefined to apply default prism theme */}\n                <Highlight {...defaultProps} theme={undefined} code={code} language={language}>\n                    {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                        <pre className={className} style={style}>\n                            {tokens.map((line, i) => (\n                                <div key={line + i} {...getLineProps({ line,\n                                    key: i })}>\n                                    {line.map((token, key) => (\n                                        <span key={key} {...getTokenProps({ token,\n                                            key })} />\n                                    ))}\n                                </div>\n                            ))}\n                        </pre>\n                    )}\n                </Highlight>\n            </figure>\n        );\n    };\n\n    const ShowCasePanel = () => (\n        <div className=\"showcase-panel\">\n            {children}\n        </div>\n    );\n\n    return (\n        <>\n            {showCasePanel ? <ShowCasePanel /> : null}\n            {codeFigure ? <CodeFigure /> : null}\n        </>\n    );\n};\n\nComponentPreview.propTypes = {\n    language: PropTypes.oneOf([\"html\", \"javascript\", \"css\"]).isRequired,\n    removeOuterTag: PropTypes.bool,\n    hideValue: PropTypes.bool,\n    removeList: PropTypes.bool,\n    showCasePanel: PropTypes.bool,\n    codeFigure: PropTypes.bool,\n    dangerousHTML: PropTypes.bool\n};\n\nexport default ComponentPreview;\n"],"sourceRoot":""}